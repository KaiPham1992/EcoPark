//
//  ProfileViewController.swift
//  EnglishApp
//
//  Created Tu DV on 10/29/19.
//  Copyright © 2019 demo. All rights reserved.
//
//  Template generated by Juanpe Catalán @JuanpeCMiOS
//

import UIKit

class ProfileViewController: BaseViewController, ProfileViewProtocol {

    @IBOutlet weak var imgAvatar: UIImageView!
    @IBOutlet weak var lbName: UILabel!
    @IBOutlet weak var lbBoss: UILabel!
    @IBOutlet weak var vUsername: AppTextField!
    @IBOutlet weak var vDisplayname: AppTextField!
    @IBOutlet weak var vPhoneNumber: AppTextField!
    @IBOutlet weak var vEmail: AppTextField!
    @IBOutlet weak var vGender: AppDropDown!
    @IBOutlet weak var vBirthDay: AppDateDropDown!
    @IBOutlet weak var btnSave: UIButton!
    @IBOutlet weak var btnChangePassword: UIButton!
    
	var presenter: ProfilePresenterProtocol?

	override func viewDidLoad() {
        super.viewDidLoad()
        setupUI()
        getDataUser()
    }

    private func setupUI() {
        addMenu()
        
        vUsername.setTitleAndPlaceHolder(title: LocalizableKey.username.showLanguage, placeHolder: "")
        vDisplayname.setTitleAndPlaceHolder(title: LocalizableKey.displaynameSignUp.showLanguage, placeHolder: LocalizableKey.enter.showLanguage)
        vPhoneNumber.setTitleAndPlaceHolder(title: LocalizableKey.phoneNumberSignUp.showLanguage, placeHolder: LocalizableKey.enter.showLanguage)
        vEmail.setTitleAndPlaceHolder(title: LocalizableKey.emailSignUp.showLanguage, placeHolder: LocalizableKey.enter.showLanguage)
        vGender.backgroundColor = .black
        vBirthDay.backgroundColor = .black
        vGender.setTitleAndPlaceHolder(title: LocalizableKey.gender.showLanguage, placeHolder: LocalizableKey.select.showLanguage)
        vBirthDay.setTitleAndPlaceHolder(title: LocalizableKey.birthday.showLanguage, placeHolder: LocalizableKey.select.showLanguage)
        btnSave.setTitle(LocalizableKey.titleSave.showLanguage, for: .normal)
        btnChangePassword.setTitle(LocalizableKey.titleChangePassword.showLanguage, for: .normal)
    }
    
    private func getDataUser() {
        vUsername.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.displayName
        vDisplayname.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.fullName
        vPhoneNumber.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.phone
        vEmail.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.email
        vGender.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.gender
        vBirthDay.tfInput.text = UserDefaultHelper.shared.loginUserInfo?.birthDay
    }
    
    @IBAction func btnSaveTapped() {
        
    }
    
    @IBAction func btnChangePasswordTapped() {
        self.push(controller: ChangePasswordRouter.createModule(), animated: true)
    }
    
    @IBAction func btnAvatarTapped() {
        SelectPhotoCanCropPopUp.shared.showCropPicker(controller: self) { image in
            guard let _iamge = image else { return }
            self.imgAvatar.image = _iamge
            self.presenter?.updateAvatar(image: _iamge)
        }
    }
    
    func didUpdateAvatar() {
        
    }
}
